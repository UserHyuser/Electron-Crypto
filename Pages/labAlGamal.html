<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Шифр Эль-Гамаля</title>
</head>
<body>
<h1>Шифр Эль-Гамаля</h1>
<div class="">
    <label id="labelP">P:</label>
    <input type="text" class="form-control" id="inputP" size="91">
    <label id="labelSize"></label>
    <input type="text" class="form-control" id="keysize" size="9" value="Размер ключа" onclick="clearInput('keysize')">
    <button onclick="generate()">Сгенерировать</button>
</div>
<br>
<div>
    <label id="">Введите данные для шифрования</label>
    <label id="labelG">G:</label>
    <input type="text" class="form-control" id="inputG1" size="10">
    <label id="labelN">C2:</label>
    <input type="text" class="form-control" id="inputC2" size="30">
    <label id="labelN">D2:</label>
    <input type="text" class="form-control" id="inputD2" size="30">
    <br>
    <textarea cols="126" rows="5" id="message"></textarea>
    <br>
    <button onclick="encode()">Зашифровать</button>
</div>
<br>
<div>
    <label >Введите данные для расшифрования</label>
    <label id="labelG">G:</label>
    <input type="text" class="form-control" id="inputG2" size="10">
    <label id="labelD">C1:</label>
    <input type="text" class="form-control" id="inputC1" size="29">
    <label id="labelN">D1:</label>
    <input type="text" class="form-control" id="inputD1" size="28">
    <br>
    <textarea cols="126" rows="5" id="cryptMessage"></textarea>
    <br>
    <button onclick="decode()">Расшифровать</button>
</div>
</body>
<script src="../functions.js"></script>
<script>
    const electron = require('electron');
    const {ipcRenderer} = electron;
    //let worker = new Worker('functions.js');
    //const cryptFunc = require('../functions');

    let inputP = document.getElementById("inputP");
    let inputC1 = document.getElementById("inputC1");
    let inputG1 = document.getElementById("inputG1");
    let inputG2 = document.getElementById("inputG2");
    let inputC2 = document.getElementById("inputC2");
    let inputD2 = document.getElementById("inputD2");
    let inputD1 = document.getElementById("inputD1");
    let keysize = document.getElementById("keysize");

    function clearInput(id) {
        let inp = document.getElementById(id);
        inp.value = '';
    }
    
    function generate() {
        let keys = AlGamalGenerate(keysize.value, inputP.value, inputG1.value, inputC1.value, inputC2.value, inputD1.value, inputD2.value)
        inputP.value = keys.p;
        inputG1.value = keys.g;
        inputG2.value = keys.g;
        inputC1.value = keys.c1;
        inputC2.value = keys.c2;
        inputD1.value = keys.d1;
        inputD2.value = keys.d2;
    }
    function encode() {
        let message = document.getElementById("message").value;
        document.getElementById("cryptMessage").value = AlGamalEncode(message, inputP.value, inputG1.value, inputC1.value, inputD2.value)
    }
    function decode() {
        let message = document.getElementById("cryptMessage").value;
        document.getElementById("message").value = AlGamalDecode(message, inputP.value, inputG2.value, inputC2.value, inputD1.value)
    }

</script>
</html>